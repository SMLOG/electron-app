/**
 * polyfill内容
 * version: 1.0.1
 * Promise
 * JSON
 * console
 * Array.prototype.indexOf
 * Array.prototype.forEach
 * Array.prototype.map
 * Array.prototype.some
 * Array.prototype.filter
 * Object.keys
 * Function.prototype.bind()
 */

!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):t.ES6Promise=r()}(this,function(){"use strict";function t(t){var r=typeof t;return null!==t&&("object"===r||"function"===r)}function r(t){return"function"==typeof t}function n(t){L=t}function e(t){D=t}function o(){return void 0!==I?function(){I(u)}:i()}function i(){var t=setTimeout;return function(){return t(u,1)}}function u(){for(var t=0;t<q;t+=2){(0,G[t])(G[t+1]),G[t]=void 0,G[t+1]=void 0}q=0}function s(t,r){var n=this,e=new this.constructor(a);void 0===e[Q]&&T(e);var o=n._state;if(o){var i=arguments[o-1];D(function(){return j(o,e,i,n._result)})}else m(n,e,t,r);return e}function c(t){var r=this;if(t&&"object"==typeof t&&t.constructor===r)return t;var n=new r(a);return w(n,t),n}function a(){}function f(){return new TypeError("You cannot resolve a promise with itself")}function l(){return new TypeError("A promises callback cannot return that same promise.")}function p(t){try{return t.then}catch(t){return Z.error=t,Z}}function h(t,r,n,e){try{t.call(r,n,e)}catch(t){return t}}function y(t,r,n){D(function(t){var e=!1,o=h(n,r,function(n){e||(e=!0,r!==n?w(t,n):_(t,n))},function(r){e||(e=!0,g(t,r))},"Settle: "+(t._label||" unknown promise"));!e&&o&&(e=!0,g(t,o))},t)}function v(t,r){r._state===V?_(t,r._result):r._state===X?g(t,r._result):m(r,void 0,function(r){return w(t,r)},function(r){return g(t,r)})}function d(t,n,e){n.constructor===t.constructor&&e===s&&n.constructor.resolve===c?v(t,n):e===Z?(g(t,Z.error),Z.error=null):void 0===e?_(t,n):r(e)?y(t,n,e):_(t,n)}function w(r,n){r===n?g(r,f()):t(n)?d(r,n,p(n)):_(r,n)}function b(t){t._onerror&&t._onerror(t._result),A(t)}function _(t,r){t._state===R&&(t._result=r,t._state=V,0!==t._subscribers.length&&D(A,t))}function g(t,r){t._state===R&&(t._state=X,t._result=r,D(b,t))}function m(t,r,n,e){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=r,o[i+V]=n,o[i+X]=e,0===i&&t._state&&D(A,t)}function A(t){var r=t._subscribers,n=t._state;if(0!==r.length){for(var e=void 0,o=void 0,i=t._result,u=0;u<r.length;u+=3)e=r[u],o=r[u+n],e?j(n,e,o,i):o(i);t._subscribers.length=0}}function O(t,r){try{return t(r)}catch(t){return Z.error=t,Z}}function j(t,n,e,o){var i=r(e),u=void 0,s=void 0,c=void 0,a=void 0;if(i){if(u=O(e,o),u===Z?(a=!0,s=u.error,u.error=null):c=!0,n===u)return void g(n,l())}else u=o,c=!0;n._state!==R||(i&&c?w(n,u):a?g(n,s):t===V?_(n,u):t===X&&g(n,u))}function E(t,r){try{r(function(r){w(t,r)},function(r){g(t,r)})}catch(r){g(t,r)}}function S(){return $++}function T(t){t[Q]=$++,t._state=void 0,t._result=void 0,t._subscribers=[]}function x(){return new Error("Array Methods must be provided an Array")}function P(t){return new tt(this,t).promise}function M(t){var r=this;return new r(Y(t)?function(n,e){for(var o=t.length,i=0;i<o;i++)r.resolve(t[i]).then(n,e)}:function(t,r){return r(new TypeError("You must pass an array to race."))})}function F(t){var r=this,n=new r(a);return g(n,t),n}function C(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function k(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function N(){var t=void 0;if("undefined"!=typeof global)t=global;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var r=t.Promise;if(r){var n=null;try{n=Object.prototype.toString.call(r.resolve())}catch(t){}if("[object Promise]"===n&&!r.cast)return}t.Promise=rt}var J=void 0;J=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var Y=J,q=0,I=void 0,L=void 0,D=function(t,r){G[q]=t,G[q+1]=r,2===(q+=2)&&(L?L(u):H())},K="undefined"!=typeof window?window:void 0,U=K||{},W=U.MutationObserver||U.WebKitMutationObserver,z="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),B="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,G=new Array(1e3),H=void 0;H=z?function(){return function(){return process.nextTick(u)}}():W?function(){var t=0,r=new W(u),n=document.createTextNode("");return r.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}():B?function(){var t=new MessageChannel;return t.port1.onmessage=u,function(){return t.port2.postMessage(0)}}():void 0===K&&"function"==typeof require?function(){try{var t=Function("return this")().require("vertx");return I=t.runOnLoop||t.runOnContext,o()}catch(t){return i()}}():i();var Q=Math.random().toString(36).substring(2),R=void 0,V=1,X=2,Z={error:null},$=0,tt=function(){function t(t,r){this._instanceConstructor=t,this.promise=new t(a),this.promise[Q]||T(this.promise),Y(r)?(this.length=r.length,this._remaining=r.length,this._result=new Array(this.length),0===this.length?_(this.promise,this._result):(this.length=this.length||0,this._enumerate(r),0===this._remaining&&_(this.promise,this._result))):g(this.promise,x())}return t.prototype._enumerate=function(t){for(var r=0;this._state===R&&r<t.length;r++)this._eachEntry(t[r],r)},t.prototype._eachEntry=function(t,r){var n=this._instanceConstructor,e=n.resolve;if(e===c){var o=p(t);if(o===s&&t._state!==R)this._settledAt(t._state,r,t._result);else if("function"!=typeof o)this._remaining--,this._result[r]=t;else if(n===rt){var i=new n(a);d(i,t,o),this._willSettleAt(i,r)}else this._willSettleAt(new n(function(r){return r(t)}),r)}else this._willSettleAt(e(t),r)},t.prototype._settledAt=function(t,r,n){var e=this.promise;e._state===R&&(this._remaining--,t===X?g(e,n):this._result[r]=n),0===this._remaining&&_(e,this._result)},t.prototype._willSettleAt=function(t,r){var n=this;m(t,void 0,function(t){return n._settledAt(V,r,t)},function(t){return n._settledAt(X,r,t)})},t}(),rt=function(){function t(r){this[Q]=S(),this._result=this._state=void 0,this._subscribers=[],a!==r&&("function"!=typeof r&&C(),this instanceof t?E(this,r):k())}return t.prototype["catch"]=function(t){return this.then(null,t)},t.prototype["finally"]=function(t){var n=this,e=n.constructor;return r(t)?n.then(function(r){return e.resolve(t()).then(function(){return r})},function(r){return e.resolve(t()).then(function(){throw r})}):n.then(t,t)},t}();return rt.prototype.then=s,rt.all=P,rt.race=M,rt.resolve=c,rt.reject=F,rt._setScheduler=n,rt._setAsap=e,rt._asap=D,rt.polyfill=N,rt.Promise=rt,rt.polyfill(),rt}),window.JSON||(window.JSON={parse:function(sJSON){return eval("("+sJSON+")")},stringify:function(){var t=Object.prototype.toString,r=Array.isArray||function(r){return"[object Array]"===t.call(r)},n={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"},e=function(t){return n[t]||"\\u"+(t.charCodeAt(0)+65536).toString(16).substr(1)},o=/[\\"\u0000-\u001F\u2028\u2029]/g;return function n(i){if(null==i)return"null";if("number"==typeof i)return isFinite(i)?i.toString():"null";if("boolean"==typeof i)return i.toString();if("object"==typeof i){if("function"==typeof i.toJSON)return n(i.toJSON());if(r(i)){for(var u="[",s=0;s<i.length;s++)u+=(s?", ":"")+n(i[s]);return u+"]"}if("[object Object]"===t.call(i)){var c=[];for(var a in i)i.hasOwnProperty(a)&&c.push(n(a)+": "+n(i[a]));return"{"+c.join(", ")+"}"}}return'"'+i.toString().replace(o,e)+'"'}}()}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,r){var n;if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),o=e.length>>>0;if(0===o)return-1;var i=+r||0;if(Math.abs(i)===1/0&&(i=0),i>=o)return-1;for(n=Math.max(i>=0?i:o-Math.abs(i),0);n<o;){if(n in e&&e[n]===t)return n;n++}return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(t,r){var n,e;if(null==this)throw new TypeError(" this is null or not defined");var o=Object(this),i=o.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(arguments.length>1&&(n=r),e=0;e<i;){var u;e in o&&(u=o[e],t.call(n,u,e,o)),e++}}),Array.prototype.map||(Array.prototype.map=function(t,r){var n,e,o;if(null==this)throw new TypeError(" this is null or not defined");var i=Object(this),u=i.length>>>0;if("[object Function]"!=Object.prototype.toString.call(t))throw new TypeError(t+" is not a function");for(r&&(n=r),e=new Array(u),o=0;o<u;){var s,c;o in i&&(s=i[o],c=t.call(n,s,o,i),e[o]=c),o++}return e}),Array.prototype.some||(Array.prototype.some=function(t){"use strict";if(void 0===this||null===this)throw new TypeError;var r=Object(this),n=r.length>>>0;if("function"!=typeof t)throw new TypeError;for(var e=arguments.length>=2?arguments[1]:void 0,o=0;o<n;o++)if(o in r&&t.call(e,r[o],o,r))return!0;return!1}),Array.prototype.filter||(Array.prototype.filter=function(t){"use strict";if(void 0===this||null===this)throw new TypeError;var r=Object(this),n=r.length>>>0;if("function"!=typeof t)throw new TypeError;for(var e=[],o=arguments.length>=2?arguments[1]:void 0,i=0;i<n;i++)if(i in r){var u=r[i];t.call(o,u,i,r)&&e.push(u)}return e}),Object.keys||(Object.keys=function(){var t=Object.prototype.hasOwnProperty,r=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],e=n.length;return function(o){if("object"!=typeof o&&"function"!=typeof o||null===o)throw new TypeError("Object.keys called on non-object");var i=[];for(var u in o)t.call(o,u)&&i.push(u);if(r)for(var s=0;s<e;s++)t.call(o,n[s])&&i.push(n[s]);return i}}()),function(t){"use strict";t.console||(t.console={});for(var r,n,e=t.console,o=function(){},i=["memory"],u="assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn".split(",");r=i.pop();)e[r]||(e[r]={});for(;n=u.pop();)e[n]||(e[n]=o)}("undefined"==typeof window?this:window),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var r=Array.prototype.slice.call(arguments,1),n=this,e=function(){},o=function(){return n.apply(this instanceof o?this:t,r.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(e.prototype=this.prototype),o.prototype=new e,o});

// Production steps of ECMA-262, Edition 6, 22.1.2.1
if (!Array.from) {
  Array.from = (function () {
    var toStr = Object.prototype.toString;
    var isCallable = function (fn) {
      return typeof fn === 'function' || toStr.call(fn) === '[object Function]';
    };
    var toInteger = function (value) {
      var number = Number(value);
      if (isNaN(number)) { return 0; }
      if (number === 0 || !isFinite(number)) { return number; }
      return (number > 0 ? 1 : -1) * Math.floor(Math.abs(number));
    };
    var maxSafeInteger = Math.pow(2, 53) - 1;
    var toLength = function (value) {
      var len = toInteger(value);
      return Math.min(Math.max(len, 0), maxSafeInteger);
    };

    // The length property of the from method is 1.
    return function from(arrayLike/*, mapFn, thisArg */) {
      // 1. Let C be the this value.
      var C = this;

      // 2. Let items be ToObject(arrayLike).
      var items = Object(arrayLike);

      // 3. ReturnIfAbrupt(items).
      if (arrayLike == null) {
        throw new TypeError("Array.from requires an array-like object - not null or undefined");
      }

      // 4. If mapfn is undefined, then let mapping be false.
      var mapFn = arguments.length > 1 ? arguments[1] : void undefined;
      var T;
      if (typeof mapFn !== 'undefined') {
        // 5. else
        // 5. a If IsCallable(mapfn) is false, throw a TypeError exception.
        if (!isCallable(mapFn)) {
          throw new TypeError('Array.from: when provided, the second argument must be a function');
        }

        // 5. b. If thisArg was supplied, let T be thisArg; else let T be undefined.
        if (arguments.length > 2) {
          T = arguments[2];
        }
      }

      // 10. Let lenValue be Get(items, "length").
      // 11. Let len be ToLength(lenValue).
      var len = toLength(items.length);

      // 13. If IsConstructor(C) is true, then
      // 13. a. Let A be the result of calling the [[Construct]] internal method 
      // of C with an argument list containing the single item len.
      // 14. a. Else, Let A be ArrayCreate(len).
      var A = isCallable(C) ? Object(new C(len)) : new Array(len);

      // 16. Let k be 0.
      var k = 0;
      // 17. Repeat, while k < len… (also steps a - h)
      var kValue;
      while (k < len) {
        kValue = items[k];
        if (mapFn) {
          A[k] = typeof T === 'undefined' ? mapFn(kValue, k) : mapFn.call(T, kValue, k);
        } else {
          A[k] = kValue;
        }
        k += 1;
      }
      // 18. Let putStatus be Put(A, "length", len, true).
      A.length = len;
      // 20. Return A.
      return A;
    };
  }());
}